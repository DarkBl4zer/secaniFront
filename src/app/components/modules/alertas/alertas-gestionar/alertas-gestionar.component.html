<body class="formato-fondo fuente-letra">
    <div class="row mb-4">
        <div class="col-md-12 col-md-9">
            <span class="saludo">Hola {{eapb}} üëãüèº,</span>
        </div>
    </div>
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="row">
                    <div class="col-12 d-flex justify-content-between align-items-center">
                        <h3 class="ms-4 mt-3">Gestionar Alertas</h3>
                    </div>
                </div>
                <p-table [value]="alertas" 
                    [paginator]="true" [rows]="5"
                    [rowsPerPageOptions]="[5, 10, 25, 50]" [showCurrentPageReport]="true"
                    currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords}"
                    [responsive]="true"
                >
                    <ng-template pTemplate="header">
                        <tr>
                            <th class="header-th text-center" [width]="100">ID Alerta</th>
                            <th class="header-th" [width]="100">Fecha Notificaci√≥n</th>
                            <th class="header-th" [width]="120">Nombre NNA</th>
                            <th class="header-th" [width]="200">Nombre EAPB</th>
                            <th class="header-th" [width]="200">Categor√≠a</th>
                            <th class="header-th">Subcategor√≠a</th>
                            <th class="header-th" [width]="120">Estado</th>
                            <th class="header-th text-center" [width]="100">Ver respuesta</th>
                            <th class="header-th text-center" [width]="100">Enviar respuesta</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-alerta>
                        <tr>
                            <td class="text-center">
                                <a href="#" (click)="verAlerta(alerta.idAlerta); $event.preventDefault();">{{alerta.idAlerta}}</a>
                            </td>
                            <td>{{alerta.fechaNotificacion | date:'dd/MM/yyyy'}}</td>
                            <td>{{alerta.nombreNNA}}</td>
                            <td>{{alerta.nombreEAPB}}</td>
                            <td>{{alerta.categoria}}</td>
                            <td>{{alerta.subcategoria}}</td>
                            <td><span class="badge bg-{{alerta.colorEstado}} text-white p-2 ">{{alerta.textoEstado}}</span></td>
                            <td class="text-center"><i class="bi bi-eye-fill" style="font-size: large; color: #73b7ad; cursor: pointer;"></i></td>
                            <td class="text-center"><i class="bi bi-send-plus" style="font-size: large; color: #73b7ad; cursor: pointer;" (click)="enviarRespuesta(alerta)"></i></td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
    </div>
    <app-notificacion-ver [show]="displayModal" [alertaId]="alertaId" (closeModal)="closeModalAlerta()" />
    <app-alertas-enviar-respuesta [show]="displayModalEnviarRespuesta"  (closeModal)="closeModalEnviarRespuesta()"
        [alertaId]="alertaId"
        [nombreNNA]="nombreNNA"
        [documentoNNA]="documentoNNA"
        [alerta]="alerta"
        />
</body>