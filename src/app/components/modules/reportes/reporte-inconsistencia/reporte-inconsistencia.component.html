<div class="container-fluid">
  <h1 class="mt-5 mb-4">Reporte Incosistencias</h1>

  <div class="card">
    <div class="card-body">
      <div class="row align-items-center mb-3">
        <div class="col-12 col-sm-2 mb-2 mb-sm-0 fw-semibold">Fecha Inicio:</div>
        <div class="col-12 col-sm-4 mb-2 mb-sm-0">
          <p-calendar styleClass="w-100" [showIcon]="true" [iconDisplay]="'input'"   />
        </div>

        <div class="col-12 col-sm-2 mb-2 mb-sm-0 fw-semibold">Fecha Fin:</div>
        <div class="col-12 col-sm-4 mb-2 mb-sm-0">
          <p-calendar styleClass="w-100" [showIcon]="true" [iconDisplay]="'input'"  />
        </div>
      </div>

      <div class="row align-items-center mb-3">
        <div class="col-12 mb-4 col-sm-9 mb-sm-0">
          <p-inputGroup>
            <input class="w-100" type="text" placeholder="Buscar..." pInputText />
            <p-inputGroupAddon>
                <i class="pi pi-search"></i>
            </p-inputGroupAddon>
        </p-inputGroup>
        </div>
        <div class="col-6 mb-2 col-sm-2 mb-sm-0">
          <p-button styleClass="w-100" label="Generar" severity="success" />
        </div>
        <div class="col-6 mb-2 col-sm-1 mb-sm-0">
          <p-button styleClass="w-100" icon="pi pi-file-excel" severity="success" />
        </div>
      </div>

      <div class="row">
        <div class="col-12 my-4">
          <table class="table table-borderless table-responsive w-100">
            <thead>
              <tr>
                <th colspan="3">Número total de inconsistencias</th>
                <th colspan="2" class="text-end">{{ reporte?.totalInconsistencias }}</th>
              </tr>
            </thead>

            <tbody>
              <!-- Distribución de Incosistencias por Tipo de Campo -->
              <tr>
                <th colspan="5" class="text-center">
                  Distribución de Incosistencias por Tipo de Campo
                </th>
              </tr>
              <tr>
                <td class="text-center">Nombres</td>
                <td class="text-center">Fechas de nacimientos</td>
                <td class="text-center">Diagnosticos</td>
                <td class="text-center">Tipo de identificación</td>
                <td class="text-center">Otros</td>
              </tr>
              <tr>
                <td class="text-center">{{ reporte?.distribucionTipoCampo?.nombre }}</td>
                <td class="text-center">{{ reporte?.distribucionTipoCampo?.fechasNacimiento }}</td>
                <td class="text-center">{{ reporte?.distribucionTipoCampo?.diagnosticoas }}</td>
                <td class="text-center">{{ reporte?.distribucionTipoCampo?.tipoIdentificacion }}</td>
                <td class="text-center">{{ reporte?.distribucionTipoCampo?.otros }}</td>
              </tr>

              <!-- Porcentaje de Inconsistencias por Fuente de Datos -->
              <tr>
                <th colspan="5" class="text-center">
                  Porcentaje de Inconsistencias por Fuente de Datos
                </th>
              </tr>
              <tr>
                <td class="text-center">SIVIGILA</td>
                <td class="text-center">RUAF</td>
                <td class="text-center">BDUA</td>
                <td colspan="2" class="text-center">MIPRES</td>
              </tr>
              <tr>
                <td class="text-center">{{ reporte?.inconsistencias?.fuenteDatos?.sivigila | percent }}</td>
                <td class="text-center">{{ reporte?.inconsistencias?.fuenteDatos?.ruaf | percent }}</td>
                <td class="text-center">{{ reporte?.inconsistencias?.fuenteDatos?.bdua | percent }}</td>
                <td colspan="2" class="text-center">{{ reporte?.inconsistencias?.fuenteDatos?.mipres | percent }}</td>
              </tr>

              <!-- Tasa de Inconsistencias por Entidad Territorial -->
              <tr>
                <th colspan="5" class="text-center">
                  Tasa de Inconsistencias por Entidad Territorial
                </th>
              </tr>
              <tr>
                <td class="text-center">ET A</td>
                <td class="text-center">ET B</td>
                <td class="text-center">ET C</td>
                <td class="text-center">ET D</td>
                <td class="text-center">ET E</td>
              </tr>
              <tr>
                <td class="text-center">{{ reporte?.inconsistencias?.entidadTerritorial?.etA | percent }}</td>
                <td class="text-center">{{ reporte?.inconsistencias?.entidadTerritorial?.etB | percent }}</td>
                <td class="text-center">{{ reporte?.inconsistencias?.entidadTerritorial?.etC | percent }}</td>
                <td class="text-center">{{ reporte?.inconsistencias?.entidadTerritorial?.etD | percent }}</td>
                <td class="text-center">{{ reporte?.inconsistencias?.entidadTerritorial?.etE | percent }}</td>
              </tr>

              <!-- Tasa de Inconsistencias por Tipo de Cancer -->
              <tr>
                <th colspan="5" class="text-center">
                  Tasa de Inconsistencias por Tipo de Cáncer
                </th>
              </tr>
              <tr>
                <td class="text-center">LLA</td>
                <td class="text-center">LMA</td>
                <td class="text-center">Otras leucemias</td>
                <td colspan="2" class="text-center">Otros Cánceres</td>
              </tr>
              <tr>
                <td class="text-center">{{ reporte?.inconsistencias?.tipoCancer?.lla | percent }}</td>
                <td class="text-center">{{ reporte?.inconsistencias?.tipoCancer?.lma | percent }}</td>
                <td class="text-center">{{ reporte?.inconsistencias?.tipoCancer?.otrasLeucemias | percent }}</td>
                <td colspan="2" class="text-center">{{ reporte?.inconsistencias?.tipoCancer?.otrosCanceres | percent }}</td>
              </tr>

              <!-- Tiempo promedio de Resolución de Inconsistencias -->
              <tr>
                <th colspan="5" class="text-center">
                  Tiempo promedio de Resolución de Inconsistencias
                </th>
              </tr>
              <tr>
                <td colspan="5" class="text-center">{{ reporte?.tiempoPromedioResolucion }}</td>
              </tr>

              <!-- Número de Casos Validados Automáticamente vs. Manualmente -->
              <tr>
                <th colspan="5" class="text-center">
                  Número de Casos Validados Automáticamente vs. Manualmente
                </th>
              </tr>
              <tr>
                <td colspan="2" class="text-center">Automáticamente</td>
                <td colspan="3" class="text-center">Manualmente</td>
              </tr>
              <tr>
                <td colspan="2" class="text-center">{{ reporte?.numerosCasosValidos?.automaticamente }}</td>
                <td colspan="3" class="text-center">{{ reporte?.numerosCasosValidos?.manualmente }}</td>
              </tr>

              <!-- Tasa de Reincidencia de Inconsistencias -->
              <tr>
                <th colspan="5" class="text-center">
                  Tasa de Reincidencia de Inconsistencias
                </th>
              </tr>
              <tr>
                <td colspan="5" class="text-center">
                  {{ reporte?.tasaResidenciaInconsistencas | percent }}
                </td>
              </tr>

              <!-- Impacto en el Tiempo de Notificación y Tratamiento -->
              <tr>
                <th colspan="5" class="text-center">
                  Impacto en el Tiempo de Notificación y Tratamiento
                </th>
              </tr>
              @for(impacto of reporte.impactosTiempoNotificacion; track impacto) {
                <tr>
                  <td colspan="5" class="text-center">
                    {{ impacto }}
                  </td>
                </tr>
              }

              <!-- Campos Críticos con Mayor Trazabilidad -->
              <tr>
                <th colspan="5" class="text-center">
                  Campos Críticos con Mayor Trazabilidad
                </th>
              </tr>
              <tr>
                <td class="text-center">
                  Fecha de inicio de tratamiento
                </td>
                <td class="text-center">
                  Fecha de toma de prueba diagnóstica presuntiva
                </td>
                <td class="text-center">
                  Fecha de resultado de prueba diagnóstica presuntiva
                </td>
                <td class="text-center">
                  Fecha de toma de prueba confirmatoria
                </td>
                <td class="text-center">
                  Fecha de resultado de prueba confirmatoria
                </td>
              </tr>
              <tr>
                <td class="text-center">
                  {{ reporte?.camposCriticos?.fechaInicioTratamiento | percent }} inconsistencias
                </td>
                <td class="text-center">
                  {{ reporte?.camposCriticos?.fechaTomaPruebaDiagnostica | percent}} inconsistencias
                </td>
                <td class="text-center">
                  {{ reporte?.camposCriticos?.fechaResultadoPruebaDiagnostica | percent}} inconsistencias
                </td>
                <td class="text-center">
                  {{ reporte?.camposCriticos?.fechaTomaPruebaConfirmatoria | percent}} inconsistencias
                </td>
                <td class="text-center">
                  {{ reporte?.camposCriticos?.fechaResultadoPruebaConfirmatoria | percent}} inconsistencias
                </td>
              </tr>
            </tbody>

          </table>
        </div>
      </div>
    </div>
  </div>
</div>
