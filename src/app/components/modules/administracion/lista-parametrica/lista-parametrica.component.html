<div class="container-fluid">
  <div class="mt-5 mb-4">
    <h1>Lista Paramétrica</h1>

    <div class="mt-3">
      <p class="mb-0">{{ titulos[listaParametrica?.nombre || ''] }}</p>
      <p class="mb-0">{{ listaParametrica?.descripcion }}</p>
      @if (listaParametrica?.tablaPadre) {
        <p class="mb-0">Lista padre: {{ listaParametrica?.tablaPadre }}</p>
      }
    </div>
  </div>

  <div class="card border border-0 pt-2">
    <div class="card-body">
      <p-table [value]="itemsListaParametricas" [tableStyle]="{ 'min-width': '50rem' }" [paginator]="true" [rows]="5"
        [rowsPerPageOptions]="[5, 10, 25, 50]" [showCurrentPageReport]="true"
        currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords}">
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="id">
              <div class="d-flex align-items-center justify-content-between">
                ID Items
                <p-sortIcon field="id" />
                <p-columnFilter type="text" field="id" display="menu" class="ms-auto"/>
              </div>
            </th>
            <th pSortableColumn="fechaCreacion">
              <div class="d-flex align-items-center justify-content-between">
                Fecha Creación
                <p-sortIcon field="fechaCreacion" />
                <p-columnFilter type="date" field="fechaCreacion" display="menu" class="ms-auto"/>
              </div>
            </th>
            <th pSortableColumn="nombre" style="width: 25rem;">
              <div class="d-flex align-items-center justify-content-between">
                Nombre de item
                <p-sortIcon field="nombre" />
                <p-columnFilter type="text" field="nombre" display="menu" class="ms-auto"/>
              </div>
            </th>
            <th pSortableColumn="indicador">
              <div class="d-flex align-items-center justify-content-between">
                Identificador
                <p-sortIcon field="indicador" />
                <p-columnFilter type="text" field="indicador" display="menu" class="ms-auto"/>
              </div>
            </th>
            <th pSortableColumn="orden">
              <div class="d-flex align-items-center justify-content-between">
                Orden en la lista
                <p-sortIcon field="orden" />
                <p-columnFilter type="text" field="orden" display="menu" class="ms-auto"/>
              </div>
            </th>
            <th pSortableColumn="itemListaPadre">
              <div class="d-flex align-items-center justify-content-between">
                Item lista padre
                <p-sortIcon field="itemListaPadre" />
                <p-columnFilter type="text" field="itemListaPadre" display="menu" class="ms-auto"/>
              </div>
            </th>
            <th style="width: 8rem">Acción</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item>
          <tr>
            <td>{{ item.id }}</td>
            <td>{{ item.fechaCreacion | date: 'dd/MM/yyyy HH:mm' }}</td>
            <td>{{ item.nombre }}</td>
            <td>{{ item.indicador || 'No aplica' }}</td>
            <td>{{ item.orden || 'No aplica' }}</td>
            <td>{{ item.itemListaPadre || 'No aplica' }}</td>
            <td>
              <div>
                <p-button icon="pi pi-pencil" [rounded]="true" [text]="true" severity="secondary"
                  [routerLink]="['/administracion/lista_parametricas', listaParametrica?.id, 'items']"
                />
                <p-button icon="pi pi-trash" [rounded]="true" [text]="true" severity="secondary" />
              </div>
            </td>
          </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="7" class="text-center">Items de la Lista paramétrica no encotrados.</td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>
